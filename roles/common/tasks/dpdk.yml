---
- name: install libarchive-dev
  become: yes
  apt: pkg=libarchive-dev update_cache=no state=present
  environment: "{{ proxy_env }}"

- name: install build-essential
  become: yes
  apt: pkg=build-essential update_cache=no state=present
  environment: "{{ proxy_env }}"

- name: install linux-headers
  become: yes
  apt: pkg=linux-headers-{{ uname_r }} update_cache=no state=present
  environment: "{{ proxy_env }}"

- name: get dpdk
  git: repo=http://dpdk.org/git/dpdk
       dest={{ dpdk_dir }}
  environment: "{{ proxy_env }}"

- name: install dpdk
  command: make install T={{ dpdk_target }} chdir={{ dpdk_dir }}

- name: put do_after_reboot.sh
  template: src=templates/do_after_reboot.j2 dest={{ install_dir }}/do_after_reboot.sh mode=775

- name: put env.sh
  template: src=templates/env_dpdk.j2 dest={{ install_dir }}/env.sh mode=775
